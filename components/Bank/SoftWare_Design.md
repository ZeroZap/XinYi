## USB 插入

### 插入识别



### 充电识别

- 充电识别可以不执行，但是通讯要开启，不然没法用了



### 通讯识别





## 日志

### error log

- 保存内部flash，可以在低压还能哦你工作



其他log

通常保存在外部 flash 中

- charge log
- usage log
- event log



### log 压测

- 防止读写越位
- 防未对齐写入压测



## 重点电压基线

- 瞬时低压
- 常规低压
  - 电压低于 x V 不写 外部flash
  - 电压低于 x V 不写内部flash
  - 电压低于 x V 强制休眠等待 USB 插入







## 休眠

- 需要为各种中断的设定休眠判断

  - 防止未知中断唤醒又未休眠

    